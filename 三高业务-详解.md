# 三高项目业务详解

先保证方案 简单可用，再考虑通用性和复用性。

总体思路：负载均衡，缓存，消息队列，分库分表

# 动静分离

分清楚  动态和静态。

所有用户看到的页面都是一样的，也是 静态数据（第一个用户的请求，将其静态化）。

归为静态的数据，就是为了做缓存，提高性能，减少链路。

app缓存，浏览器缓存，apache，缓存。

# 库存

1. 访问量大，是瓶颈。
2. 为了数据的一致性 ，要加锁。更是瓶颈。

锁库存。

思路：1个库存字段 100个库存。10个库存字段，每个10。

一张表：商品id，总库存。  redis：商品id-库存-1：10，商品id-库存-2：10。。。。。。

总库存 99，锁定库存：1
释放锁。

# 方法论

写数据，读数据。

写：读写分离，分库分表，延迟操作。

读：多级缓存，请求数据的优化。

数据传输的少。减少 cpu，io。

请求数少。（）

依赖少。（高可用。）

短路径，短url。（路径短 ，缓存。）

减少传输。

避免单点。降级方案。

---

限流，拒绝。动态扩缩容 relicas 2-&#x3e;5。
